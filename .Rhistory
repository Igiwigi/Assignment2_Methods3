m1R2 <- add_criterion(model1, criterion = "loo_R2")
m2R2 <- add_criterion(model2, criterion = "loo_R2")
m3R2 <- add_criterion(model3, criterion = "loo_R2")
m4R2 <- add_criterion(model4, criterion = "loo_R2")
m1R2
m2R2
m3R2
m4R2#still parts of the model haven't converged
m4R2#still parts of the model haven't converged
m4
m2
m1 <- add_criterion(model1, criterion = "loo", moment_match = T)
loo_compare( m1, m2, m3, m4)
loo_model_weights( m1, m2, m3, m4)
m1 <- add_criterion(model1, criterion = "loo")
m2 <- add_criterion(model2, criterion = "loo")
m3 <- add_criterion(model3, criterion = "loo")
m4 <- add_criterion(model4, criterion = "loo")
#Found 12 observations with a pareto_k > 0.7 in model 'model1'. It is recommended to set 'moment_match = TRUE' in order to perform moment matching for problematic observations.
#yet moment_match = T  gives an error, if important fix it later?
m1
m2
#increased the delta to 0.95 after suggestion
m3
m4
m4 <- add_criterion(model4, criterion = "loo")
m4
m4R2
m4
demo <- read_csv("data/test-data/demo_test.csv")
uld <- read_csv("data/test-data/LU_test.csv")
token <- read_csv("data/test-data/token_test.csv")
View(demo)
demo <- na.omit(demo)
View(demo)
demo <- read_csv("data/test-data/demo_test.csv")
model <- load("data/model4_fit.rds")
model <- readRDS("data/model4_fit.rds")
View(model)
predictions <- predict(model, demo)
demo1 <- demo %>%
filter(Visit == 1)
demo1
View(demo1)
demo %>%
filter(Visit == 1) %>%
summarise(Any_NA = any(is.na(.)))
demo %>%
filter(Visit == 1) %>%
filter_all(any_vars(is.na(.)))
demo %>%
filter(Visit == 1) %>%
filter_all(any_vars(is.na(T)))
demo %>%
filter(Visit == 1) %>%
summarise(Any_NA = any(is.na(.)))
demo %>%
filter(Visit == 1) %>%
select(-VinelandReceptive, -VinelandExpressive, -VinelandWritten)
summarise(Any_NA = any(is.na(.)))
demo %>%
filter(Visit == 1) %>%
select(-VinelandReceptive, -VinelandExpressive, -VinelandWritten)%>%
summarise(Any_NA = any(is.na(.)))
View(demo)
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit == 1, first(ADOS), ADOS))
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))
demo <- read_csv("data/test-data/demo_test.csv")
#are there any NA values when visit 1?
demo %>%
filter(Visit == 1) %>%
select(-VinelandReceptive, -VinelandExpressive, -VinelandWritten)%>%
summarise(Any_NA = any(is.na(.)))
#there arent if vineland is omitted, wtf is it even?
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>%
mutate(ADOS1 = first(ADOS))
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))
View(uld)
uld <- uld %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", your_data$Visit1))) %>%
select(-starts_with("Visit"))
uld <- uld %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit))) %>%
select(-starts_with("Visit"))
uld <- uld %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit)))
uld <- uld %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", VISIT)))
uld <- uld %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", VISIT)))
uld <- uld %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", VISIT))) %>%
rename(Visit = Visit)
uld <- read_csv("data/test-data/LU_test.csv")
uld <- uld %>%
rename(VISIT = Visit)
uld <- uld %>%
rename(VISIT = Visit)
uld <- uld %>%
rename(VISIT = Visit)%>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit)))
uld <- uld %>%
rename(Visit = VISIT)%>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit)))
uld <- uld %>%
rename(Visit = VISIT)%>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit)))%>%
rename(Child.ID = SUBJ)
uld <- read_csv("data/test-data/LU_test.csv")
uld <- uld %>%
rename(Visit = VISIT)%>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit)))%>%
rename(Child.ID = SUBJ)
View(data)
uld <- uld %>%
rename(Visit = VISIT)%>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit)))%>%
rename(Child.ID = SUBJ)%>%
distinct(Child.ID) %>%
mutate(Child.Number = row_number())
uld <- read_csv("data/test-data/LU_test.csv")
uld <- uld %>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit))) %>%
rename(Child.ID = SUBJ) %>%
distinct(Child.ID) %>%
mutate(Child.Number = row_number())
demo <- read_csv("data/test-data/demo_test.csv")
uld <- read_csv("data/test-data/LU_test.csv")
token <- read_csv("data/test-data/token_test.csv")
#are there any NA values when visit 1?
demo %>%
filter(Visit == 1) %>%
select(-VinelandReceptive, -VinelandExpressive, -VinelandWritten)%>%
summarise(Any_NA = any(is.na(.)))
#there arent if vineland is omitted, wtf is it even?
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))
#what diagnosis is A and which is B? need to know to code them
uld <- uld %>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit))) %>%
rename(Child.ID = SUBJ) %>%
mutate(Child.Number = row_number())
uld <- uld %>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit))) %>%
rename(Child.ID = SUBJ) %>%
group_by(Child.ID) %>%  # Group by Child.ID
mutate(Child.ID = cur_group_id())
demo <- read_csv("data/test-data/demo_test.csv")
uld <- read_csv("data/test-data/LU_test.csv")
token <- read_csv("data/test-data/token_test.csv")
#are there any NA values when visit 1?
demo %>%
filter(Visit == 1) %>%
select(-VinelandReceptive, -VinelandExpressive, -VinelandWritten)%>%
summarise(Any_NA = any(is.na(.)))
#there arent if vineland is omitted, wtf is it even?
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))
#what diagnosis is A and which is B? need to know to code them
uld <- uld %>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit))) %>%
rename(Child.ID = SUBJ) %>%
group_by(Child.ID) %>%  # Group by Child.ID
mutate(Child.ID = cur_group_id())
uld <- read_csv("data/test-data/LU_test.csv")
#are there any NA values when visit 1?
demo %>%
filter(Visit == 1) %>%
select(-VinelandReceptive, -VinelandExpressive, -VinelandWritten)%>%
summarise(Any_NA = any(is.na(.)))
#there arent if vineland is omitted, wtf is it even?
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))
#what diagnosis is A and which is B? need to know to code them
uld <- uld %>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit))) %>%
rename(Child.ID = SUBJ) %>%
group_by(Child.ID) %>%  # Group by Child.ID
mutate(Child.ID = cur_group_id())
View(token)
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
group_by(Child.ID) %>%
mutate(Child.ID = cur_group_id())
demo <- read_csv("data/test-data/demo_test.csv")
uld <- read_csv("data/test-data/LU_test.csv")
token <- read_csv("data/test-data/token_test.csv")
#are there any NA values when visit 1?
demo %>%
filter(Visit == 1) %>%
select(-VinelandReceptive, -VinelandExpressive, -VinelandWritten)%>%
summarise(Any_NA = any(is.na(.)))
#there arent if vineland is omitted, wtf is it even?
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
group_by(Child.ID) %>%
mutate(Child.ID = cur_group_id())
#what diagnosis is A and which is B? need to know to code them
uld <- uld %>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit))) %>%
rename(Child.ID = SUBJ) %>%
group_by(Child.ID) %>%
mutate(Child.ID = cur_group_id())
token <- token %>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())
token <- token %>%
rename(Child.ID = SUBJ) %>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())
token <- token %>%
rename(Child.ID = SUBJ) %>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())%>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit)))
demo <- read_csv("data/test-data/demo_test.csv")
uld <- read_csv("data/test-data/LU_test.csv")
token <- read_csv("data/test-data/token_test.csv")
#are there any NA values when visit 1?
demo %>%
filter(Visit == 1) %>%
select(-VinelandReceptive, -VinelandExpressive, -VinelandWritten)%>%
summarise(Any_NA = any(is.na(.)))
#there arent if vineland is omitted, wtf is it even?
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())
#what diagnosis is A and which is B? need to know to code them
uld <- uld %>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit))) %>%
rename(Child.ID = SUBJ) %>%
group_by(Child.ID) %>%
mutate(Child.ID = cur_group_id())
token <- token %>%
rename(Child.ID = SUBJ) %>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())%>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit)))
demo <- read_csv("data/test-data/demo_test.csv")
uld <- read_csv("data/test-data/LU_test.csv")
token <- read_csv("data/test-data/token_test.csv")
#are there any NA values when visit 1?
demo %>%
filter(Visit == 1) %>%
select(-VinelandReceptive, -VinelandExpressive, -VinelandWritten)%>%
summarise(Any_NA = any(is.na(.)))
#there arent if vineland is omitted, wtf is it even?
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())
#what diagnosis is A and which is B? need to know to code them
uld <- uld %>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit))) %>%
rename(Child.ID = SUBJ) %>%
group_by(Child.ID) %>%
mutate(Child.ID = cur_group_id())
token <- token %>%
rename(Child.ID = SUBJ) %>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())%>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit)))%>%
select(-X)
demo <- read_csv("data/test-data/demo_test.csv")
uld <- read_csv("data/test-data/LU_test.csv")
token <- read_csv("data/test-data/token_test.csv")
#are there any NA values when visit 1?
demo %>%
filter(Visit == 1) %>%
select(-VinelandReceptive, -VinelandExpressive, -VinelandWritten)%>%
summarise(Any_NA = any(is.na(.)))
#there arent if vineland is omitted, wtf is it even?
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())%>%
mutate(Diagnosis = if_else(Diagnosis = A, "ASD", "TD"))
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())%>%
mutate(Diagnosis = if_else(Diagnosis = "A", "ASD", "TD"))
demo <- read_csv("data/test-data/demo_test.csv")
uld <- read_csv("data/test-data/LU_test.csv")
token <- read_csv("data/test-data/token_test.csv")
#are there any NA values when visit 1?
demo %>%
filter(Visit == 1) %>%
select(-VinelandReceptive, -VinelandExpressive, -VinelandWritten)%>%
summarise(Any_NA = any(is.na(.)))
#there arent if vineland is omitted, wtf is it even?
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())%>%
mutate(Diagnosis = if_else(Diagnosis = "A", "ASD", "TD"))
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())%>%
mutate(Diagnosis = if_else(Diagnosis = "A", "ASD", "TD"))
demo <- read_csv("data/test-data/demo_test.csv")
uld <- read_csv("data/test-data/LU_test.csv")
token <- read_csv("data/test-data/token_test.csv")
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())%>%
mutate(Diagnosis = if_else(Diagnosis = "A", "ASD", "TD"))
demo <- read_csv("data/test-data/demo_test.csv")
uld <- read_csv("data/test-data/LU_test.csv")
token <- read_csv("data/test-data/token_test.csv")
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())%>%
mutate(Diagnosis = if_else(Diagnosis = "A", "ASD", "TD"))
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())%>%
mutate(Diagnosis = if_else(Diagnosis = A, "ASD", "TD"))
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
mutate(Diagnosis = if_else(Diagnosis = A, "ASD", "TD"))%>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())
demo <- read_csv("data/test-data/demo_test.csv")
uld <- read_csv("data/test-data/LU_test.csv")
token <- read_csv("data/test-data/token_test.csv")
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
mutate(Diagnosis = if_else(Diagnosis == "A", "ASD", "TD"))%>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())
test_data <- inner_join(demo,uld)
test_data <- outer_join(demo,uld)
test_data <- left_join(demo,uld)
#are there any NA values when visit 1?
demo %>%
filter(Visit == 1) %>%
select(-VinelandReceptive, -VinelandExpressive, -VinelandWritten)%>%
summarise(Any_NA = any(is.na(.)))
#there arent if vineland is omitted, wtf is it even?
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
mutate(Diagnosis = if_else(Diagnosis == "A", "ASD", "TD"))%>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())
uld <- uld %>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit))) %>%
rename(Child.ID = SUBJ) %>%
group_by(Child.ID) %>%
mutate(Child.ID = cur_group_id())
token <- token %>%
rename(Child.ID = SUBJ) %>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())%>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit)))%>%
select(-X)
test_data <- cross_join(demo,uld)
demo <- read_csv("data/test-data/demo_test.csv")
uld <- read_csv("data/test-data/LU_test.csv")
token <- read_csv("data/test-data/token_test.csv")
#are there any NA values when visit 1?
demo %>%
filter(Visit == 1) %>%
select(-VinelandReceptive, -VinelandExpressive, -VinelandWritten)%>%
summarise(Any_NA = any(is.na(.)))
#there arent if vineland is omitted, wtf is it even?
demo <- demo %>%
group_by(Child.ID) %>%
mutate(ADOS = if_else(is.na(ADOS) & Visit != 1, first(ADOS), ADOS))%>% #kind of unnecessary since I only care about 1st value due to the model specification
mutate(ADOS1 = first(ADOS))%>%
mutate(Socialization1 = first(Socialization))%>%
mutate(VerbalIQ1 = first(ExpressiveLangRaw))%>%
mutate(Diagnosis = if_else(Diagnosis == "A", "ASD", "TD"))%>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())
uld <- uld %>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit))) %>%
rename(Child.ID = SUBJ) %>%
group_by(Child.ID) %>%
mutate(Child.ID = cur_group_id())
token <- token %>%
rename(Child.ID = SUBJ) %>%
group_by(Child.ID) %>% #can do this since the order of the children is the same in each dataframe
mutate(Child.ID = cur_group_id())%>%
rename(Visit = VISIT) %>%
mutate(Visit = as.integer(gsub("[^0-9]", "", Visit)))%>%
select(-X)
test_data <- inner_join(demo,uld)
test_data <- inner_join(test_data, token)
View(token)
View(test_data)
test_data <- test_data %>%
select(Child.ID, Visit, Diagnosis, Socialization1, ADOS1, CHI_MLU, VerbalIQ1 )
View(test_data)
stan_samples <- sampling(model, data = test_data, chains = 4, iter = 1000)
